<!DOCTYPE html>
<!-- saved from url=(0055)http://evro.themescare.com/themes/pizze-item/login.html -->
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Pizzle - Reset Password</title>
    <!-- favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon/favicon-32x32.png">
    <!-- Bootstrap Css -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!--Owl-Carousel css-->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
    <!-- Fontawesome Css -->
    <link rel="stylesheet" href="assets/css/all.css">
    <!-- Magnific popup CSS -->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!-- Main Css -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!--Responsive css-->
    <link rel="stylesheet" href="assets/css/responsive.css">
    <!-- Base Css -->
    <!-- Custome Added -->
    <link rel="stylesheet" href="assets/css/base.css">
</head>

<body class="notfound">

<!-- Header Area Start -->
<div class="error-page-header-area">
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-lg-4 col-sm-4">
                <div class="error-page-logo">
                    <a href="index.html">
                        <img src="assets/img/logo_black.png" alt="Site Logo">
                    </a>
                </div>
            </div>
            <div class="col-lg-8 col-sm-8">
                <div class="error-page-logo-right">
                    <a href="index.html"> <span class="fa fa-home"></span>back to home</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Header Area End -->


<!-- Error Page Area Start -->
<div class="error-page-area">
    <img src="assets/img/shape_10.png" alt="shape" class="shape_10">
    <img src="assets/img/shape_12.png" alt="shape" class="shape_12">
    <img src="assets/img/shape_14.png" alt="shape" class="shape_14">
    <img src="assets/img/shape_15.png" alt="shape" class="shape_15">
    <img src="assets/img/shape_16.png" alt="shape" class="shape_16">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="reset_password login_inn">
                    <div class="login-wrapper">
                        <img class="login_icon" src="assets/img/login.png" alt="login user"/>
                        <h3>Reset Password</h3>
                        <p id="text-message-form"></p>
                        <form>
                            <div class="form-row" id="container-email">
                                <input type="email" id="email" placeholder="Email"/>
                            </div>
                            <div class="form-row d-none" id="container-code">
                                <input type="text" id="code" placeholder="Code"/>
                            </div>
                            <div class="form-row d-none" id="container-rest-password-password1">
                                <input type="password" id="password" name="password" placeholder="Password"/>
                            </div>
                            <div class="form-row d-none" id="container-rest-password-password2">
                                <input type="password" id="password2" name="password2" placeholder="Password Confirm"/>
                            </div>
                            <div class="form-row d-none" id="container-timer-resend-code">
                                <div id="timer-resend-code">05:00</div>
                                <span class="d-inline-block fs-8" style="margin-left:10px">Resend</span>
                            </div>
                            <div class="form-row"></div>
                            <div class="form-row" id="btn-send-code">
                                <button type="button">Send Code</button>
                            </div>
                            <div class="form-row d-none" id="btn-check-code">
                                <button type="button">Check Code</button>
                            </div>
                            <div class="form-row d-none" id="btn-set-password">
                                <button type="button">Set Password</button>
                            </div>
                            <div class="form-row"></div>
                            <div class="form-row"></div>
                            <div class="socials-wrapper">
                                <p>
                                    <a href="login.html">Login</a>
                                </p>
                            </div>
                            <div class="socials-wrapper">
                                <p>
                                    <a href="signup.html" class="fs-6">Create an Account</a>
                                </p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Error Page Area End -->


<!-- Jquery -->
<script src="assets/js/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="assets/js/bootstrap.bundle.min.js"></script>
<!--Owl-Carousel js-->
<script src="assets/js/OwlCarousel/dist/owl.carousel.js"></script>
<!-- Magnific Popup JS -->
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<!-- TweenMax JS -->
<script src="assets/js/tweenmax.min.js"></script>
<!-- ScrollMagic JS -->
<script src="assets/js/scrollmagic.min.js"></script>
<!-- Animation gsap JS -->
<script src="assets/js/animation.gsap.js"></script>
<!-- Main JS -->
<script src="assets/js/main.js"></script>
<!-- Base JS -->
<!-- Custome Added -->
<script src="assets/js/base.js"></script>
<script>
    const RESET_PASSWORD = new ResetPassword()
    let btn_send_code = document.getElementById('btn-send-code')
    let btn_check_code = document.getElementById('btn-check-code')
    let btn_set_password = document.getElementById('btn-set-password')
    let input_email = document.getElementById('email')
    let input_code = document.getElementById('code')
    let container_email = document.getElementById('container-email')
    let container_code = document.getElementById('container-code')
    let text_message_form = document.getElementById('text-message-form')
    let container_timer_resend = document.getElementById('container-timer-resend-code')
    let timer_resend = document.getElementById('timer-resend-code')
    let container_reset_password1 = document.getElementById('container-rest-password-password1')
    let container_reset_password2 = document.getElementById('container-rest-password-password2')
    let input_password = document.getElementById('password')
    let input_password2 = document.getElementById('password2')


    btn_send_code.addEventListener('click', function () {
        let email = input_email.value
        let email_is_valid = ValidationEmail(email)
        if (email_is_valid) {
            text_message_form.innerText = ''
            RESET_PASSWORD.send_code(email, function (response) {
                let status = response.status
                if (status == 200 || status == 226) {
                    code_sended()
                } else {
                    text_message_form.setAttribute('message-type', 'alert-text')
                    text_message_form.innerText = response.message
                }
                if (status == 226) {
                    text_message_form.setAttribute('message-type', 'warning-text')
                    text_message_form.innerText = response.message
                }
            }, btn_send_code)

        } else {
            text_message_form.setAttribute('message-type', 'alert-text')
            text_message_form.innerText = 'Please enter valid email'
            input_email.value = ''
        }
    })

    btn_check_code.addEventListener('click', function () {
        let code = input_code.value
        if (code) {
            RESET_PASSWORD.check_code(code, function (response) {
                let status = response.status
                if (status == 200) {
                    code_is_valid()
                    text_message_form.setAttribute('message-type', 'success-text')
                    text_message_form.innerText = response.message
                } else {
                    text_message_form.setAttribute('message-type', 'alert-text')
                    text_message_form.innerText = response.message
                    input_code.value = ''
                }
            }, btn_check_code)

        } else {
            text_message_form.setAttribute('message-type', 'alert-text')
            text_message_form.innerText = 'Please enter valid code'
            input_code.value = ''
        }
    })

    btn_set_password.addEventListener('click', function () {
        RESET_PASSWORD.set_password(input_password.value, input_password2.value, function (response) {
            let status = response.status
            if (status == 200) {
                text_message_form.setAttribute('message-type', 'success-text')
                text_message_form.innerText = response.message
                setTimeout(function () {
                    window.location.href = PAGE_LOGIN
                }, 2000)
            } else {
                text_message_form.setAttribute('message-type', 'alert-text')
                text_message_form.innerText = response.message
            }
        }, btn_set_password)

    })

    function code_is_valid() {
        container_code.classList.add('d-none')
        container_timer_resend.classList.add('d-none')
        container_reset_password1.classList.remove('d-none')
        container_reset_password2.classList.remove('d-none')
        btn_check_code.classList.add('d-none')
        btn_set_password.classList.remove('d-none')

    }

    function code_sended() {
        btn_check_code.classList.remove('d-none')
        btn_send_code.classList.add('d-none')
        container_email.classList.add('d-none')
        container_code.classList.remove('d-none')
        container_timer_resend.classList.remove('d-none')
        set_timer_resend(function () {
            btn_check_code.classList.add('d-none')
            btn_send_code.classList.remove('d-none')
            container_email.classList.remove('d-none')
            container_code.classList.add('d-none')
            container_timer_resend.classList.add('d-none')
            input_code.value = ''
        })
    }

    let timer_resend_handler
    let counter_timer = 300

    function set_timer_resend(handler) {
        timer_resend_handler = setInterval(function () {
            let sec = Math.floor(counter_timer % 60)
            if (sec < 10) {
                sec = `0${sec}`
            }
            let min = Math.floor(counter_timer / 60)
            if (min < 10) {
                min = `0${min}`
            }
            timer_resend.innerHTML = `${min}:${sec}`
            counter_timer -= 1
            if (counter_timer < 0) {
                handler()
                clearInterval(timer_resend_handler)
                counter_timer = 300
            }

        }, 1000)
    }
</script>
</body>

</html>